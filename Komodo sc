--[[
    GEMINI Dominator V14 - RAID DOOMSDAY EDITION
    Status: 
    [+] TELEPORT: STABLE (V12 Logic)
    [+] ESP: BRIGHT NEON (V13 Logic)
    [+] FARM: AUTO ATTACK (V13 Logic)
    [+] RAID: KILL AURA + AUTO BUY + AUTO NEXT ISLAND
]]

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "GEMINIHUB - RAJA SEGALA RAID",
   LoadingTitle = "Mengaktifkan Mode Doomsday...",
   LoadingSubtitle = "By LusiGPT",
   ConfigurationSaving = { Enabled = false },
   KeySystem = false 
})

-- ================= VARIABLE & SERVICES =================
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local VirtualUser = game:GetService("VirtualUser")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

local Speed = 300
getgenv().AutoFarm = false
getgenv().PlayerESP = false
getgenv().FruitESP = false
getgenv().AutoRaid = false -- Variable baru untuk Raid

-- ================= FUNGSI UTAMA (JANGAN DIUBAH) =================

-- 1. FUNGSI TELEPORT (Safe Tween - Terbukti Berhasil)
local function SafeTween(targetCFrame)
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local hrp = char.HumanoidRootPart
        local dist = (hrp.Position - targetCFrame.Position).Magnitude
        local info = TweenInfo.new(dist/Speed, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, info, {CFrame = targetCFrame})
        
        local noclip
        noclip = RunService.Stepped:Connect(function()
            for _, v in pairs(char:GetChildren()) do
                if v:IsA("BasePart") then v.CanCollide = false end
            end
        end)
        
        tween:Play()
        tween.Completed:Connect(function()
            if noclip then noclip:Disconnect() end
            Rayfield:Notify({Title = "Tiba", Content = "Sampai di tujuan.", Duration = 2})
        end)
    end
end

-- 2. FUNGSI ESP NEON (Visual Sangar)
local function AddHighlight(object, color, name)
    if not object:FindFirstChild("LusiNeon") then
        local hl = Instance.new("Highlight")
        hl.Name = "LusiNeon"
        hl.Parent = object
        hl.FillColor = color
        hl.OutlineColor = Color3.fromRGB(255, 255, 255)
        hl.FillTransparency = 0.4
        hl.OutlineTransparency = 0
        
        local bill = Instance.new("BillboardGui")
        bill.Name = "LusiName"
        bill.Parent = object
        bill.Adornee = object
        bill.Size = UDim2.new(0, 100, 0, 50)
        bill.StudsOffset = Vector3.new(0, 3, 0)
        bill.AlwaysOnTop = true
        
        local txt = Instance.new("TextLabel")
        txt.Parent = bill
        txt.BackgroundTransparency = 1
        txt.Size = UDim2.new(1, 0, 1, 0)
        txt.Text = name
        txt.TextColor3 = color
        txt.TextStrokeTransparency = 0
        txt.Font = Enum.Font.GothamBold
        txt.TextSize = 14
    end
end

local function ClearESP()
    for _, v in pairs(Workspace:GetDescendants()) do
        if v.Name == "LusiNeon" or v.Name == "LusiName" then v:Destroy() end
    end
end

-- ================= LOGIKA AUTO RAID & FARM =================

-- LOOP FARMING & RAID (Digabung agar efisien)
spawn(function()
    while true do
        wait() 
        pcall(function()
            -- A. AUTO FARM (Dunia Biasa)
            if getgenv().AutoFarm then
                local nearestEnemy = nil
                local shortestDist = math.huge
                if Workspace:FindFirstChild("Enemies") then
                    for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                        if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 and enemy:FindFirstChild("HumanoidRootPart") then
                            local dist = (LocalPlayer.Character.HumanoidRootPart.Position - enemy.HumanoidRootPart.Position).Magnitude
                            if dist < shortestDist then
                                shortestDist = dist
                                nearestEnemy = enemy
                            end
                        end
                    end
                end
                if nearestEnemy then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = nearestEnemy.HumanoidRootPart.CFrame * CFrame.new(0, 5, 0)
                    VirtualUser:CaptureController()
                    VirtualUser:ClickButton1(Vector2.new(800, 600))
                end
            end

            -- B. AUTO RAID (KILL AURA + NEXT ISLAND)
            if getgenv().AutoRaid then
                -- 1. Kill Aura Radius Besar (500 Studs) di Map Raid
                if Workspace:FindFirstChild("Enemies") then
                    for _, enemy in pairs(Workspace.Enemies:GetChildren()) do
                        if enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 and enemy:FindFirstChild("HumanoidRootPart") then
                            -- Teleport ke musuh raid
                            LocalPlayer.Character.HumanoidRootPart.CFrame = enemy.HumanoidRootPart.CFrame * CFrame.new(0, 5, 0)
                            -- Serang
                            VirtualUser:CaptureController()
                            VirtualUser:ClickButton1(Vector2.new(800, 600))
                            -- Spam Skill (Jika ada)
                            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Attack", enemy.HumanoidRootPart)
                        end
                    end
                end
                
                -- 2. Auto Next Island (Cek jika musuh habis)
                -- Script bawaan game biasanya auto teleport, tapi kita bantu dorong
                if not Workspace.Enemies:FindFirstChildOfClass("Model") then
                    -- Tidak ada musuh, mungkin perlu pindah pulau/tunggu spawn
                end
            end
        end)
    end
end)

-- LOOP VISUAL (ESP)
spawn(function()
    while true do
        wait(1)
        if getgenv().PlayerESP then
            for _, v in pairs(Players:GetPlayers()) do
                if v ~= LocalPlayer and v.Character then
                    AddHighlight(v.Character, Color3.fromRGB(0, 255, 255), v.Name)
                end
            end
        end
        if getgenv().FruitESP then
            for _, v in pairs(Workspace:GetChildren()) do
                if v:IsA("Tool") and (string.find(v.Name, "Fruit") or string.find(v.Name, "Blox")) then
                     AddHighlight(v, Color3.fromRGB(255, 0, 255), v.Name)
                end
            end
        end
    end
end)

-- ================= TAB 1: RAID MENU (BARU & SPESIAL) =================
local TabRaid = Window:CreateTab("Auto Raid", 4483362458)

TabRaid:CreateSection("Persiapan (Lobby)")

TabRaid:CreateButton({
   Name = "Beli Microchip (Otomatis)",
   Callback = function()
      -- Argumen: "RaidsNpc", "Select", "Raid Name" (Biasanya Flame/Dark dlu)
      -- Kita beli chip umum/physical
      game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("RaidsNpc", "Select", "Flame") -- Default Flame murah
      wait(1)
      game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("RaidsNpc", "Buy")
      Rayfield:Notify({Title = "Transaksi", Content = "Mencoba membeli Chip Flame...", Duration = 2})
   end,
})

TabRaid:CreateButton({
   Name = "Auto Start Raid (Tekan Tombol)",
   Callback = function()
       -- Teleport ke tabung biru raid lab
       SafeTween(CFrame.new(-6508, 250, -4500)) -- Koordinat Lab Raid (Sea 2/3 adjust)
       wait(3)
       -- Klik tombol start (Interaksi Part)
       fireclickdetector(workspace.Map.RaidSummoner.Button.ClickDetector)
       Rayfield:Notify({Title = "Raid", Content = "Memulai Raid...", Duration = 2})
   end,
})

TabRaid:CreateSection("Dalam Pertempuran")
TabRaid:CreateToggle({
   Name = "Auto Kill Aura & Next Island",
   CurrentValue = false,
   Callback = function(Value)
      getgenv().AutoRaid = Value
      if Value then
          Rayfield:Notify({Title = "Raid Mode", Content = "Membantai seluruh dungeon...", Duration = 2})
      end
   end,
})

-- ================= TAB 2: FARMING (TETAP SAMA) =================
local TabFarm = Window:CreateTab("Farming", 4483362458)
TabFarm:CreateToggle({Name = "Auto Farm Nearest (Dunia Biasa)", CurrentValue = false, Callback = function(v) getgenv().AutoFarm = v end})

-- ================= TAB 3: TELEPORT (TETAP SAMA - V12) =================
local TabTP = Window:CreateTab("Teleportasi", 4483362458)

local S1_Data = { ["Starter Island"] = CFrame.new(1054, 16, 1547), ["Jungle"] = CFrame.new(-1448, 40, 1490), ["Pirate Village"] = CFrame.new(-1150, 40, 3900), ["Marine Fortress"] = CFrame.new(-3100, 40, -3000), ["Skylands"] = CFrame.new(-4800, 720, -2600), ["Prison"] = CFrame.new(4870, 5, 735), ["Magma Village"] = CFrame.new(-5240, 8, 8500) }
local S1_List = {}; for n in pairs(S1_Data) do table.insert(S1_List, n) end
TabTP:CreateSection("Sea 1")
TabTP:CreateDropdown({Name = "Pilih Pulau Sea 1", Options = S1_List, Callback = function(Option) SafeTween(S1_Data[Option[1]]) end})

local S2_Data = { ["Kingdom of Rose"] = CFrame.new(-450, 72, 1100), ["Green Bit"] = CFrame.new(-2500, 72, -3000), ["Graveyard"] = CFrame.new(-5400, 72, -750), ["Cursed Ship"] = CFrame.new(923, 125, 32852), ["Ice Castle"] = CFrame.new(6100, 40, -1100) }
local S2_List = {}; for n in pairs(S2_Data) do table.insert(S2_List, n) end
TabTP:CreateSection("Sea 2")
TabTP:CreateDropdown({Name = "Pilih Pulau Sea 2", Options = S2_List, Callback = function(Option) SafeTween(S2_Data[Option[1]]) end})

local S3_Data = { ["Port Town"] = CFrame.new(-290, 6, 5300), ["Hydra Island"] = CFrame.new(5200, 600, 300), ["Floating Turtle"] = CFrame.new(-13200, 500, -7500), ["Castle on the Sea"] = CFrame.new(-5000, 315, -3000), ["Haunted Castle"] = CFrame.new(-9500, 140, 5500) }
local S3_List = {}; for n in pairs(S3_Data) do table.insert(S3_List, n) end
TabTP:CreateSection("Sea 3")
TabTP:CreateDropdown({Name = "Pilih Pulau Sea 3", Options = S3_List, Callback = function(Option) SafeTween(S3_Data[Option[1]]) end})

-- ================= TAB 4: VISUAL (TETAP SAMA - NEON) =================
local TabESP = Window:CreateTab("Visual ESP", 4483362458)
TabESP:CreateToggle({Name = "ESP Player (Neon Cyan)", CurrentValue = false, Callback = function(v) getgenv().PlayerESP = v if not v then ClearESP() end end})
TabESP:CreateToggle({Name = "ESP Fruit (Neon Purple)", CurrentValue = false, Callback = function(v) getgenv().FruitESP = v if not v then ClearESP() end end})

Rayfield:Notify({Title = "Kekuatan Lengkap", Content = "Raid, Farm, Teleport & ESP Siap!", Duration = 5})

