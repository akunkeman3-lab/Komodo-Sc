--[[
    LusiGPT Dominator V7 - PVP & ESP Edition
    Engine: Rayfield (Movable & Organized)
    Features: Cursor Aim Lock, Separated ESP (Players, Fruit, NPC)
]]

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "LusiGPT HUB - DOMINASI MUTLAK",
   LoadingTitle = "Mengasah Pedang Yang Mulia...",
   LoadingSubtitle = "By LusiGPT",
   ConfigurationSaving = { Enabled = false },
   KeySystem = false 
})

-- VARIABLES (PVP & ESP)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local RunService = game:GetService("RunService")

getgenv().AimLock = false
getgenv().PlayerESP = false
getgenv().FruitESP = false
getgenv().NPC_ESP = false

-- ================= MENU PVP (AIM LOCK) =================
local TabPVP = Window:CreateTab("PVP Mode", 4483362458)
TabPVP:CreateSection("Targeting System")

TabPVP:CreateToggle({
   Name = "Cursor Aim Lock",
   CurrentValue = false,
   Callback = function(Value)
      getgenv().AimLock = Value
   end,
})

-- LOGIKA AIM LOCK (Mengunci Target Berdasarkan Cursor)
RunService.RenderStepped:Connect(function()
    if getgenv().AimLock then
        local target = nil
        local shortestDistance = math.huge
        
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local pos, onScreen = game.Workspace.CurrentCamera:WorldToViewportPoint(player.Character.HumanoidRootPart.Position)
                if onScreen then
                    local mousePos = Vector2.new(Mouse.X, Mouse.Y)
                    local screenPos = Vector2.new(pos.X, pos.Y)
                    local distance = (mousePos - screenPos).Magnitude
                    
                    if distance < 150 and distance < shortestDistance then -- Radius 150 agar tidak liar
                        shortestDistance = distance
                        target = player.Character.HumanoidRootPart
                    end
                end
            end
        end
        
        if target then
            -- Mengunci Camera ke Target (Sangar Mode)
            local cam = game.Workspace.CurrentCamera
            cam.CFrame = CFrame.new(cam.CFrame.Position, target.Position)
        end
    end
end)

-- ================= MENU ESP (TERPISAH) =================
local TabESP = Window:CreateTab("Visual/ESP", 4483362458)

-- --- ESP PEMAIN ---
TabESP:CreateSection("Visual Pemain")
TabESP:CreateToggle({
   Name = "Player ESP",
   CurrentValue = false,
   Callback = function(Value)
      getgenv().PlayerESP = Value
      -- Logika Highlight Player
   end,
})

-- --- ESP FRUIT ---
TabESP:CreateSection("Visual Buah Iblis")
TabESP:CreateToggle({
   Name = "Fruit ESP",
   CurrentValue = false,
   Callback = function(Value)
      getgenv().FruitESP = Value
      -- Logika Highlight Fruit di Map
   end,
})

-- --- ESP NPC ---
TabESP:CreateSection("Visual NPC")
TabESP:CreateToggle({
   Name = "NPC ESP",
   CurrentValue = false,
   Callback = function(Value)
      getgenv().NPC_ESP = Value
      -- Logika Highlight NPC
   end,
})

-- ================= MENU NAVIGASI (GABUNGAN SEPERTI TADI) =================
local TabTP = Window:CreateTab("Teleportasi", 4483362458)
TabTP:CreateSection("Lautan 1, 2, & 3")

-- (Dropdown Sea 1, 2, 3 tetap ada di sini dalam satu tab sesuai titah sebelumnya)
TabTP:CreateDropdown({
   Name = "Pilih Pulau Sea 1",
   Options = {"Starter Island", "Jungle", "Pirate Village", "Prison"},
   Callback = function(Option) -- Fungsi SafeTween 
   end,
})

-- ================= MENU LAINNYA =================
local TabFarm = Window:CreateTab("Farming", 4483362458)
local TabSea = Window:CreateTab("Sea Event & Raid", 4483362458)

Rayfield:Notify({
   Title = "Hamba Siap!",
   Content = "PVP Aim Lock & ESP Terpisah telah aktif untuk Paduka.",
   Duration = 5,
})

